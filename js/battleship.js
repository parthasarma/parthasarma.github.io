function parseGuess(e){var s=["A","B","C","D","E","F","G"];if(null===e||2!==e.length)alert("Oops, please enter a letter and a number on the board.");else{var t=e.charAt(0).toUpperCase(),i=s.indexOf(t),n=e.charAt(1);if(isNaN(i)||isNaN(n))alert("Oops, that isn't on the board.");else{if(!(0>i||i>=model.boardSize||0>n||n>=model.boardSize))return i+n;alert("Oops, that's off the board!")}}return null}function init(){var e=document.getElementById("fireButton");e.onclick=handleFireButton;var s=document.getElementById("guessInput");s.onkeypress=handleKeyPress,model.generateShipLocations(),document.getElementById("guessInput").focus()}function handleFireButton(){var e=document.getElementById("guessInput"),s=e.value;controller.processGuess(s),e.value=""}function handleKeyPress(e){var s=document.getElementById("fireButton");return e=e||window.event,13===e.keyCode?(s.click(),!1):void 0}var view={displayMessage:function(e){var s=document.getElementById("messageArea");s.innerHTML=e},displayHit:function(e){var s=document.getElementById(e);s.setAttribute("class","hit")},displayMiss:function(e){var s=document.getElementById(e);s.setAttribute("class","miss")}},model={boardSize:7,numShips:3,shipLength:3,shipsSunk:0,ships:[{locations:[0,0,0],hits:["","",""]},{locations:[0,0,0],hits:["","",""]},{locations:[0,0,0],hits:["","",""]}],fire:function(e){for(var s=0;s<this.numShips;s++){var t=this.ships[s],i=t.locations.indexOf(e);if("hit"===t.hits[i])return view.displayMessage("Oops, you already hit that location!"),!0;if(i>=0)return t.hits[i]="hit",view.displayHit(e),view.displayMessage("HIT!!"),this.isSunk(t)&&(view.displayMessage("You sank my battleship"),this.shipsSunk++),!0}return view.displayMiss(e),view.displayMessage("You Missesd!!"),!1},isSunk:function(e){for(var s=0;s<this.shipLength;s++)if("hit"!==e.hits[s])return!1;return!0},generateShipLocations:function(){for(var e,s=0;s<this.numShips;s++){do e=this.generateShips();while(this.collision(e));this.ships[s].locations=e}},generateShips:function(){var e,s,t=Math.floor(2*Math.random());1===t?(e=Math.floor(Math.random()*this.boardSize),s=Math.floor(Math.random()*(this.boardSize-this.shipLength))):(s=Math.floor(Math.random()*this.boardSize),e=Math.floor(Math.random()*(this.boardSize-this.shipLength)));for(var i=[],n=0;n<this.shipLength;n++)i.push(1===t?e+""+(s+n):e+n+""+s);return i},collision:function(e){for(var s=0;s<this.numShips;s++)for(var t=model.ships[s],i=0;i<e.length;i++)if(t.locations.indexOf(e[i])>=0)return!0;return!1}},controller={guesses:0,processGuess:function(e){var s=parseGuess(e);if(s){this.guesses++;var t=model.fire(s);t&&model.shipsSunk===model.numShips&&view.displayMessage("You sank all my battleships, in "+this.guesses+" guesses.")}}};window.onload=init;